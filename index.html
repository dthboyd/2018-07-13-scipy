<!doctype html>
<html>
	<head>
		<meta charset="utf-8">

		<title>Leveraging Jupyter, Rust, and Webassembly for Browser-Based Data Exploration</title>

        <meta name="description" content="
        A talk describing a proof-of-concept jupyter widget using rust-compiled webassembly for 
        data exploration in the browser. This talk was presented at SciPy 2018 in the DataViz track
        on Friday, July 13th in Austin, TX.">
        <meta name="author" content="Madicken Munk">
        
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		
        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/custom.css">
		<link rel="stylesheet" href="css/theme/white.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
                    <h3>Leveraging Jupyter, Rust, and WebAssembly for 
                        Browser-Based Visual Data Exploration</h3>
                    <br/>
                    <h4>Madicken Munk</h4>
                    <h4>Scipy (Austin, TX) 2018.07.13</h4>
                </section>
                <section>
                    <h5>About Me:</h5>
                        <span class="fragment">
                            <a href="http://berkeley.edu"
                            class="image"><img
                            height="120"
                            src="http://www.berkeley.edu/brand/img/seals/ucbseal_139_540.png"
                            alt="Nuclear Engineering, University of California, Berkeley"
                            frameborder="no"></a>
                            <a href="http://nuc.berkeley.edu"
                            class="image"><img
                            height="120"
                            src="./images/ucbneutronics.png"
                            alt="Nuclear Engineering, University of California, Berkeley"></a>
                            <a href="https://www.ornl.gov/division/rnsd"
                            class="image"><img
                            height="120"
                            src="https://upload.wikimedia.org/wikipedia/commons/c/ce/Oak_Ridge_National_Laboratory_logo.svg"
                            alt="Radiation Transport Group, Oak Ridge National Laboratory"></a>
                            <a href="http://bids.berkeley.edu"
                            class="image"><img
                            height="100"
                            src="http://bids.berkeley.edu/sites/all/themes/bids/logo.png"
                            alt="BIDS Logo"></a>
                        </span>
                        </br>
                        <span class="fragment">
                            <a
                            href="http://upload.wikimedia.org/wikipedia/en/thumb/1/18/UIUC_seal.svg/1024px-UIUC_seal.svg"
                            class="image"><img
                            height="120"
                            src="https://upload.wikimedia.org/wikipedia/en/a/af/University_of_Illinois_seal.svg"
                            alt="illinois"></a>
                            <a href="http://ncsa.illinois.edu"
                            class="image"><img
                            height="120"
                            src="http://www.ncsa.illinois.edu/assets/img/logos_ncsa.png"
                            alt="NCSA Logo"></a>
                            <a href="https://data-exp-lab.github.io/"
                            class="image"><img
                            height="120"
                            src="http://avatars1.githubusercontent.com/u/15057231?s=200&v=4"
                            alt="DXL Logo"></a>
                        </span>
                </section>
                <section>
                    <section>
                        <h3>Visualizing our Data</h3>
                        <span>
                            <img height="250" src="./images/weather.png"
                            title="Hover over for info.">
                            <img height="250" src="./images/illustris.jpg"
                            title="Hover over for info.">
                            <img height="250" src="./images/physics.png"
                            title="Hover over for info.">
                        </span>
                        </br>
                        <span>
                            <img height="250" src="./images/weather2.png"
                            title="Hover over for info.">
                            <img height="250" src="./images/world.png"
                            title="Hover over for info.">
                            <img height="250" src="./images/meshstuff.png"
                            title="Hover over for info.">
                        </span>
                    </section>
                    <section>
                        <h3>Visualizing our Data Interactively</h3>
                        <ul>
                        <li class="fragment">Interactivity allows on-the fly parameter tuning</li>
                        <li class="fragment">... it also allows for exploration</li>
                        <li class="fragment">Reveals interesting science!</li>
                        <li class="fragment">Allows science to be accessible
                            <ul>
                            <li class="fragment">to non-scientists</li>
                            <li class="fragment">to those that don't identify as "hackers"</li>
                            <li class="fragment">to those that are new to the data</li>
                            </ul>
                        </li>
                        </ul>
                    </section>
                    <section>
                        <h3>Tools Enabling Interactivity Make Science Accessible</h3>
                        <p class="fragment" style="color:purple">VisIT
                        ParaView
                        vtk</p>
                        <p class="fragment" style="color:blue">glue
                        pyviz</p>
                        <p class="fragment" style="color:green">ipyvolume
                        Jupyter widgets</p>
                        <aside class="notes">
                            Jupyter widgets allow us access to yt's powerful API while offering  an ease of use that might be difficult by using the API exclusively. 
                        </aside>
                    </section>
                    <section id="isolated-I">
                        <h3>Using Jupyter Widgets out-of-the-box With yt</h3>
                        <font size="5"><a href="#/backup-isolated-I">backup slide</a></font> 
                    </section>
                    <section>
                        <h3>Diagram Image: Regular Widget</h3>
                    </section>
                    <section>
                        <h3>When might this become cumbersome?</h3>
                    </section>
                    <section>
                        <h3>Diagram Image: Python + js + Rust</h3>
                    </section>
                    <section id="isolated-II">
                        <h3>Using yt-canvas-widget</h3>
                        <font size="5"><a href="#/backup-isolated-II">backup slide</a></font> 
                    </section>
                    <section>
                        <h3>Use case example</h3>
                        <div id="left">
                            <img class="fragment" width="500" style="position: absolute;" 
                             src="./images/DD0046_Projection_z_density_density_nogrid.png" />
                            <img class="fragment" width="500" style="position: absolute;" 
                             src="./images/DD0046_Projection_z_density_density.png" />
                        </div>
                        </br>
                        <div id="right">
                            <img class="fragment" height="225"  
                             src="./images/frb_80.png" />
                            <img class="fragment" height="225"  
                             src="./images/frb_40.png" />
                            <img class="fragment" height="225"  
                             src="./images/frb_10.png" />
                        </div>
                        <aside class="notes">
                        note: describe here how a server-based workflow would require re-sending an image every time the view was updated, even though the image thatâ€™s rendered might not change a whole lot.

                        note: this is where we highlight the math of the client-based image generation vs. the server based image generation.
                        </aside>
                    </section>
                    <section>
                        <h3>Pushing Data to the Browser Makes Sense as</h3>
                        <ul>
                            <p class="fragment"><b>&#8593;</b> n</p>
                            <p class="fragment"><b>&#8593;</b> data_{image}</p>
                            <p class="fragment"><b>&#8595;</b> t_{client_compute}</p>
                        </ul>
                    </section>
                </section>
                <section>
                    <section>
                        <h3 class="fragment">Why Webassembly?</h3>
                            <ul class="fragment">
                            <li>faster than js</li>
                            <li>wasm objects work with javascript</li>
                            <li>sandboxed memory environment</li>
                            <li>reduces t_{client_computer}</li>
                            </br>
                            </ul>
                        <h3 class="fragment">Why Rust?</h3>
                        <ul>
                            <ul class="fragment">
                            <li>safe</li>
                            <li>performant</li>
                            <li>welcoming</li>
                            </ul>

                        <aside class="notes">
                            Notes:
                            * Rust can compile to webassembly and packaged as a npm package
                              * caveat: much of this is currently under development, new 
                                functionality is added frequently.
                              * Webassembly functions can be called and used by javascript. 
                         </aside>
                    </section>
                    <section>
                        <h3> <a href="https://github.com/rustwasm/wasm-bindgen">wasm-bindgen </a></h3>
                             <pre class="rust"><code data-trim data-noescape>
                             
                             #[wasm_bindgen]
                             pub struct Foo {
                                 internal: i32,
                             }
                             
                             #[wasm_bindgen]
                             impl Foo {
                                 pub fn new(val: i32) -> Foo {
                                     Foo { internal: val }
                                 }
                             
                                 pub fn get(&self) -> i32 {
                                     self.internal
                                 }
                             
                                 pub fn set(&mut self, val: i32) {
                                     self.internal = val;
                                 }
                             }
                             </code></pre>
                    </section>
                    <section>
                        <h3> <a href="https://github.com/rustwasm/wasm-pack">wasm-pack</a> </h3>
                        <img data-src="http://github.com/rustwasm/wasm-pack/blob/master/demo.gif?raw=true">
                        This can then be released as a <a href="https://www.npmjs.com/package/@data-exp-lab/yt-tools">npm package</a>
                        <aside class="notes">
                            wasm-pack
                            * packages compiled to js+webassembly easily
                            * can be uploaded to npm after packaging

                            note: mention here that these packages are under active development and that features we've been using have been added as we've been developing (e.g. the wasm-bindgen examples were all added to the repo in March)
                        </aside>
                    </section>
                </section>
                <section>
                    <section>
                    <h3> What does this mean? </h3>
                        <p>With a single, fixed, up-front cost we eliminate n*t_render</p>
                        <p>This is useful in some, but not all cases</p>
                    </section>
                    <section data-transition="none">
                    <h3> How it works: the first render </h3>
                        <span>
                            <img class="fragment" height="600" 
                             src="./images/FRB_1.svg" />
                        </span>
                    </section>
                    <section data-transition="none">
                    <h3> Widget Components: the FRB Viewer</h3>
                        <span>
                            <img height="500" 
                             src="./images/FRB_2.svg" />
                        </span>
                    </section>
                    <section data-transition="none">
                    <h3> Widget Components: the Normalizer </h3>
                        <span>
                            <img height="500" 
                             src="./images/FRB_3.svg" />
                        </span>
                    </section>
                    <section>
                    <h3> How it works: changing the colormap </h3>
                    </section>
                    <section>
                    <h3> How it works: navigating with canvas interactions </h3>
                    </section>
                </section>
                <section>
                    <section id="pop-II">
                        <h2>Demo: Large Dataset</h2>
                        <font size="5"><a href="#/backup-pop-II">backup slide</a></font> 
                    </section>
                </section>
                <section>
                    <section>
                        <h3> Limitations of this Widget: </h3>
                        <ul>
                            <li class="fragment">requires a 2d data slice</li>
                            <li class="fragment">limited to data sizes</li>
                            <li class="fragment">limited functionality</li>
                            <li class="fragment">requires maintenance in multiple package ecosystems and languages</li>
                        </ul>
                    </section>
                    <section>
                        <h3> Moving Forward </h3>
                            <ul>
                            <li class="fragment">Broaden the functionality of the widget
                                <ul>
                                <li>Linking with data units and values</li>
                                <li>Allow for different dimensionalities</li>
                                <li>Leverage traitlet linking for multiple field types</li>
                                </ul>
                            </li>
                            <li class="fragment">Build out cross-functionality with yt</li>
                            <li class="fragment">Be inclusive</li>
                            </ul>
                    </section>
                    <section>
                        <h3>Links</h3>
                        <ul>
                            <li><a href="https://github.com/data-exp-lab/rust-yt-tools">rust-yt-tools</a> repository</li>
                            <li><a href="https://github.com/data-exp-lab/yt-canvas-widget">yt-canvas-widget</a> repository</li>
                            <li><a href="https://girder.hub.yt/#collection/5730acb5dd9119000142c361">Data</a> and <a href="https://arxiv.org/abs/1504.07639">paper</a> for widget demonstration</a></li>
                        </ul>
                    </section>
				    <section>
                        <h3>Installing the widget:</h3>

                        <ul>
                            <li>doesn't require Rust</li>
                            <li>doesn't requre you to compile to webassembly</li>
                        </ul>

                        <pre class="bash"><code data-trim data-noescape>
                            pip install yt_pycanvas
                            jupyter nbextension enable --py --sys-prefix yt_pycanvas
                        </code></pre>
                    </section>
				    <section>
                        <h3>Installing the widget (harder):</h3>

                        <ul>
                            <li>does require Rust (nightly) / node / npm</li>
                            <li>requires compilation to webassembly</li>
                        </ul>

                        <pre class="bash"><code data-trim data-noescape>
                            git clone https://github.com/data-exp-lab/yt-canvas-widget
                            git clone https://github.com/data-exp-lab/rust-yt-tools
                            cd ./rust-yt-tools
                            wasm-pack init --scope data-exp-lab
                            cd ../yt-canvas-widget/js/
                            npm install --save ../../rust-yt-tools/pkg/
                            npm install
                            cd ../
                            pip install -e .
                            jupyter nbextension install --py --symlink --sys-prefix yt_pycanvas
                            jupyter nbextension enable --py --sys-prefix yt_pycanvas
                        </code></pre>
                    </section>
                </section>
				<section>
                    Thanks to the following collaborators:
                    <ul>
                    <li class="fragment">Matthew Turk</li>
                    <li class="fragment">Nathanael Claussen</li>
                    <li class="fragment">Nathan Goldbaum</li>
                    <li class="fragment">Kacper Kowalik</li>
                    </ul>
                </section>
				<section>
                    <h3>The end</h3>
                    <h4>Madicken Munk</h4>
                    <br/>
                    <a href="https://munkm.github.io/2018-07-13-scipy">https://munkm.github.io/2018-07-13-scipy</a>
                    <br/>
                    <font size="5">
                        <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Leveraging Jupyter, Rust, and WebAssembly for Browser-Based visual Data Exploration</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://munkm.github.io" property="cc:attributionName" rel="cc:attributionURL">Madicken Munk</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.<br />Based on a work at <a xmlns:dct="http://purl.org/dc/terms/" href="http://munkm.github.io/2018-07-13-scipy" rel="dct:source">http://munkm.github.io/2018-07-13-scipy</a>.
                    </font>
                </section>
                <section>
                    <section>
                        <h2>Backup Slides</h2>
                    </section>
                    <section id="backup-isolated-I">
                        <h4>Backup Slides: Generic Widget w/ Isolated Galaxy</h4>
                        <font size="5"><a href="#/isolated-I">back</a></font>
                    </section>
                    <section id="backup-isolated-II">
                        <h4>Backup Slides: yt-canvas widget w/ Isolated Galaxy</h4>
                        <font size="5"><a href="#/isolated-II">back</a></font>
                    </section>
                    <section id="backup-pop-II">
                        <h4>Backup Slides: yt-canvas widget with Pop II Prime</h4>
                        <font size="5"><a href="#/pop-II">back</a></font>
                    </section>
                </section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
                history: true,

				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
            Reveal.configure({ slideNumber: true });
		</script>
	</body>
</html>
